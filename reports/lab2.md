# 1

保留位，物理页号，RSW（为supervisor software保留）， 标志位。

标志位从高到低

D-dirty，A-Accessed，G-Global，U-User，X-Executable，W-Writable，R-Readable，V-vaild，

# 2

1. 缺页可能导致的异常：
   - 加载页错误(Load Page Fault)：读取时页面不存在
   - 存储页错误(Store Page Fault)：写入时页面不存在
   - 指令页错误(Instruction Page Fault)：取指时页面不存在

2. 缺页时的重要寄存器：
   - stval：包含导致异常的虚拟地址
   - scause：存储异常原因(12/13/15分别对应上述三种页错误)
   - sepc：异常指令的地址

3. Lazy策略的好处：
   - 减少内存占用：只有实际使用的内存页才会被分配
   - 加快进程启动：不需要等待所有页面加载完成
   - 提高内存利用率：避免了对未使用内存的浪费
   - 降低系统负载：减少了不必要的I/O操作

4. 10G连续内存的SV39页表占用估算：
   - 需要约2.5M (10G/4KB) 个页表项
   - 每个页表项8字节
   - 三级页表结构下：
     - 最后一级页表：约2.5M * 8B = 20MB
     - 中间级页表：约2.5K * 8B = 20KB
     - 顶级页表：几个条目，可忽略
   - 总计约20MB量级

5. Lazy策略：初始分配时只建立虚拟地址映射，不实际分配物理页，缺页时检查虚拟地址是否在合法范围内。

6. Swap页面在PTE上的表现：
   - (V)位设置为0，表示页面无效
   - 其他位可以用来存储该页面在磁盘上的位置信息
   - 保留页面的权限位信息，以便在重新加载时恢复

# 3

1. 使用satp更换页表

2. 设置U位控制用户态无法访问

3. 性能更好，TLB hit rate 更高

4. 双页表在进入内核态时切换到内核页表，返回用户态时切换到用户页表，进程切换时更换用户页表

单页表在：进程切换时进行页表切换，但在内核态与用户态切换时保持同一页表，通过 U 位和优先级级别来保证安全性

# 荣誉准则

在完成本次实验的过程（含此前学习的过程）中，我没有获取guide和bookv3以外的任何指导。 

我独立完成了本次实验除以上方面之外的所有工作，包括代码与文档。 我清楚地知道，从以上方面获得的信息在一定程度上降低了实验难度，可能会影响起评分。

我从未使用过他人的代码，不管是原封不动地复制，还是经过了某些等价转换。 我未曾也不会向他人（含此后各届同学）复制或公开我的实验代码，我有义务妥善保管好它们。 我提交至本实验的评测系统的代码，均无意于破坏或妨碍任何计算机系统的正常运转。 我清楚地知道，以上情况均为本课程纪律所禁止，若违反，对应的实验成绩将按“-100”分计。
